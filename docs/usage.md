# 八、使用说明

本章节提供NLP-SecLogAI系统的详细使用说明，帮助用户快速上手并熟练掌握系统的各项功能。

## 8.1 用户界面概述

NLP-SecLogAI系统的用户界面采用现代化的Web设计，主要由以下几个部分组成：

### 8.1.1 导航栏

位于页面顶部，包含以下主要功能入口：

- **仪表盘**：系统概览和数据统计
- **日志管理**：日志上传、查询和分析
- **异常检测**：执行检测和查看异常结果
- **规则管理**：配置和管理检测规则
- **系统设置**：系统配置和用户管理
- **帮助文档**：使用帮助和常见问题

### 8.1.2 主工作区

根据导航栏选择的功能，主工作区会显示相应的内容和操作界面。

### 8.1.3 状态栏

位于页面底部，显示当前系统状态、最近活动和版本信息。

## 8.2 用户注册与登录

### 8.2.1 首次访问

1. 打开浏览器，访问系统URL（例如：http://your-domain.com 或 http://localhost:5000）
2. 首次使用系统需要创建管理员账号
3. 点击"创建管理员账号"按钮

![创建管理员账号](../assets/images/create_admin.png)

### 8.2.2 创建管理员账号

1. 填写以下信息：
   - 用户名
   - 电子邮件
   - 密码（两次输入确认）
2. 点击"创建账号"按钮
3. 创建成功后自动跳转到登录页面

### 8.2.3 用户登录

1. 在登录页面输入用户名/邮箱和密码
2. 点击"登录"按钮
3. 登录成功后进入系统仪表盘

![用户登录](../assets/images/login_page.png)

### 8.2.4 找回密码

1. 在登录页面点击"忘记密码"链接
2. 输入注册的电子邮箱
3. 点击"发送重置链接"按钮
4. 系统将发送密码重置链接到注册邮箱
5. 点击邮件中的链接，在新页面中设置新密码

## 8.3 仪表盘使用

仪表盘是系统的主页面，提供系统状态和数据概览。

### 8.3.1 访问仪表盘

1. 登录系统后自动进入仪表盘
2. 或从任意页面通过导航栏的"仪表盘"按钮进入

### 8.3.2 仪表盘组件

仪表盘主要包含以下组件：

1. **安全概览**
   - 总日志条数
   - 已检测异常数
   - 高危异常数量
   - 当前活跃规则数

2. **异常趋势图**
   - 显示一段时间内的异常数量变化
   - 可按日、周、月查看数据

3. **异常类型分布**
   - 饼图展示不同类型异常的占比
   - 鼠标悬停查看详细数量

4. **最近检测到的异常**
   - 表格显示最近10条异常记录
   - 点击"查看详情"可跳转到异常详情页面

5. **热点源IP**
   - 展示产生异常最多的IP地址
   - 点击IP可查看相关日志和异常

6. **系统状态**
   - 服务状态（运行中/维护中）
   - 最近一次检测时间
   - 数据库状态和大小

### 8.3.3 时间范围筛选

1. 在仪表盘右上角选择时间范围：
   - 今日
   - 最近7天
   - 最近30天
   - 自定义范围（选择起止日期）
2. 点击"应用"按钮更新仪表盘数据

![仪表盘](../assets/images/dashboard.png)

## 8.4 日志管理

日志管理模块用于上传、查询和分析安全日志。

### 8.4.1 日志上传

#### 单个文件上传

1. 导航至"日志管理 > 上传日志"
2. 点击"选择文件"按钮或将文件拖拽到上传区域
3. 从下拉菜单选择日志类型（SSH、Web、防火墙等）
   - 如不确定，可选择"自动识别"
4. 点击"上传并处理"按钮
5. 等待上传和处理完成，系统将显示处理结果

![日志上传](../assets/images/log_upload.png)

#### 批量上传

1. 导航至"日志管理 > 上传日志"
2. 点击"批量上传"标签
3. 点击"选择文件夹"按钮或拖拽整个文件夹到上传区域
4. 设置全局日志类型或选择"按文件名自动识别"
5. 点击"开始批量处理"按钮
6. 系统将显示处理进度和结果统计

### 8.4.2 日志查询

1. 导航至"日志管理 > 查询日志"
2. 使用以下筛选条件查找日志：
   - 日志类型（下拉选择）
   - 时间范围（日期选择器）
   - 源IP地址（文本输入）
   - 事件类型（下拉选择）
   - 关键词（文本输入）
3. 点击"查询"按钮执行搜索
4. 查询结果以表格形式显示
5. 可点击表格中的列标题排序

![日志查询](../assets/images/log_search.png)

### 8.4.3 日志分析

1. 在日志查询结果中，点击某条日志的"分析"按钮
2. 系统将执行NLP分析，包括：
   - 实体识别（用户、IP、端口等）
   - 关键词提取
   - 事件类型判断
3. 分析结果将以卡片形式显示
4. 点击"保存分析结果"可将分析结果永久存储

![日志分析](../assets/images/log_analysis.png)

### 8.4.4 导出日志

1. 在日志查询结果页面，点击"导出"按钮
2. 选择导出格式：
   - CSV
   - JSON
   - Excel
3. 选择是否包含分析结果
4. 点击"确认导出"按钮
5. 系统将生成并下载文件

## 8.5 异常检测

异常检测模块用于执行检测规则并查看检测结果。

### 8.5.1 执行异常检测

1. 导航至"异常检测 > 执行检测"
2. 选择要检测的日志类型：
   - 全部日志
   - SSH日志
   - Web日志
   - 防火墙日志
   - 其他日志类型
3. 选择检测模式：
   - 规则检测（应用预定义规则）
   - AI检测（使用机器学习模型）
   - 综合检测（同时使用规则和AI）
4. 点击"开始检测"按钮
5. 系统将显示检测进度和结果统计

![执行检测](../assets/images/run_detection.png)

### 8.5.2 查看异常结果

1. 导航至"异常检测 > 异常列表"
2. 使用以下筛选条件查找异常：
   - 异常类型（下拉选择）
   - 检测方式（规则/AI/综合）
   - 时间范围（日期选择器）
   - 严重程度（下拉选择）
3. 点击"查询"按钮执行搜索
4. 异常结果以表格形式显示
5. 表格中包含以下主要信息：
   - 异常ID
   - 检测时间
   - 异常类型
   - 源IP
   - 严重程度
   - 检测方式（规则/AI）

![异常列表](../assets/images/anomalies_list.png)

### 8.5.3 异常详情

1. 在异常列表中，点击某条异常的"详情"按钮
2. 异常详情页面显示以下信息：
   - 基本信息（时间、类型、严重程度等）
   - 相关日志内容
   - 触发的规则（如果是规则检测）
   - AI分析结果（如果是AI检测）
   - 相关联的其他异常
3. 可对异常进行以下操作：
   - 标记为误报
   - 添加备注
   - 导出详情

![异常详情](../assets/images/anomaly_details.png)

## 8.6 规则管理

规则管理模块用于创建、编辑和管理异常检测规则。

### 8.6.1 查看规则列表

1. 导航至"规则管理 > 规则列表"
2. 系统显示所有已配置的规则
3. 表格中包含以下主要信息：
   - 规则ID
   - 规则名称
   - 规则描述
   - 适用日志类型
   - 启用状态
   - 最近修改时间

![规则列表](../assets/images/rules_list.png)

### 8.6.2 创建新规则

1. 导航至"规则管理 > 创建规则"
2. 填写以下基本信息：
   - 规则名称
   - 规则描述
   - 适用日志类型
   - 严重程度
3. 选择规则类型：
   - 基于SQL查询
   - 基于正则表达式
   - 基于聚合分析
4. 根据选择的规则类型，填写相应的规则定义：
   - SQL查询语句
   - 正则表达式模式
   - 聚合条件和阈值
5. 设置规则触发后的操作：
   - 仅记录
   - 发送警报
   - 执行自定义脚本
6. 点击"测试规则"可预览规则执行效果
7. 点击"保存规则"完成创建

![创建规则](../assets/images/create_rule.png)

### 8.6.3 编辑规则

1. 在规则列表中，点击某条规则的"编辑"按钮
2. 修改规则信息
3. 点击"保存更改"按钮

### 8.6.4 启用/禁用规则

1. 在规则列表中，找到目标规则
2. 点击"状态"列中的开关按钮切换状态
3. 确认操作后规则状态立即生效

### 8.6.5 规则导入/导出

1. 导航至"规则管理 > 规则列表"
2. 点击"导出规则"可将当前规则导出为JSON文件
3. 点击"导入规则"可从JSON文件导入规则配置

## 8.7 系统配置

系统配置模块用于管理系统参数和用户。

### 8.7.1 基本设置

1. 导航至"系统设置 > 基本设置"
2. 可配置以下参数：
   - 系统名称和描述
   - 日志保留时间
   - 异常检测频率
   - 警报通知设置
3. 点击"保存设置"应用更改

![基本设置](../assets/images/system_settings.png)

### 8.7.2 通知设置

1. 导航至"系统设置 > 通知设置"
2. 配置异常通知方式：
   - 电子邮件
   - Slack
   - Webhook
   - 短信
3. 设置通知触发条件：
   - 所有异常
   - 仅高危异常
   - 自定义条件
4. 点击"测试通知"可发送测试消息
5. 点击"保存设置"应用更改

### 8.7.3 用户管理

1. 导航至"系统设置 > 用户管理"
2. 查看当前用户列表
3. 点击"添加用户"创建新用户：
   - 填写用户信息
   - 设置权限角色
   - 点击"创建用户"
4. 编辑用户：点击用户行的"编辑"按钮
5. 删除用户：点击用户行的"删除"按钮

![用户管理](../assets/images/user_management.png)

### 8.7.4 角色管理

1. 导航至"系统设置 > 角色管理"
2. 查看当前角色列表
3. 点击"添加角色"创建新角色：
   - 设置角色名称和描述
   - 配置权限（模块访问、操作权限）
   - 点击"创建角色"
4. 编辑角色：点击角色行的"编辑"按钮
5. 删除角色：点击角色行的"删除"按钮

### 8.7.5 系统备份

1. 导航至"系统设置 > 系统备份"
2. 点击"创建备份"开始备份过程
3. 备份完成后可下载备份文件
4. 点击"恢复"可从备份文件恢复系统

## 8.8 高级功能

### 8.8.1 自定义分析管道

1. 导航至"高级功能 > 自定义分析"
2. 点击"创建分析管道"
3. 拖拽组件到画布上构建分析流程：
   - 数据源组件
   - 过滤器组件
   - 分析器组件
   - 输出组件
4. 配置各组件参数
5. 点击"保存"并命名流程
6. 点击"运行"测试流程

![自定义分析](../assets/images/custom_analysis.png)

### 8.8.2 报表生成

1. 导航至"高级功能 > 报表"
2. 点击"创建报表"
3. 选择报表类型：
   - 日常安全报表
   - 异常分析报表
   - 合规审计报表
   - 自定义报表
4. 配置报表参数：
   - 时间范围
   - 包含的数据
   - 图表类型
5. 点击"生成预览"查看报表效果
6. 点击"导出"可将报表导出为PDF或Excel格式

### 8.8.3 API访问

系统提供REST API供外部系统集成：

1. 导航至"高级功能 > API访问"
2. 点击"创建API密钥"
3. 设置密钥描述和权限范围
4. 生成的API密钥将显示一次，请保存好
5. 页面提供API文档和使用示例

![API访问](../assets/images/api_access.png)

## 8.9 常见问题与故障排除

### 8.9.1 日志上传问题

**问题**: 上传日志文件失败
**解决方案**:
1. 检查文件格式是否正确
2. 确认文件大小未超过系统限制（默认100MB）
3. 尝试将大文件分割成小文件上传
4. 检查服务器磁盘空间是否充足

**问题**: 日志解析结果不正确
**解决方案**:
1. 确认选择了正确的日志类型
2. 检查日志格式是否标准
3. 提交样本到系统管理员以改进解析器

### 8.9.2 异常检测问题

**问题**: 未检测到预期的异常
**解决方案**:
1. 检查是否创建了相应的检测规则
2. 确认规则已启用
3. 验证日志数据是否满足规则条件
4. 调整规则参数以提高检测灵敏度

**问题**: 出现大量误报
**解决方案**:
1. 调整规则参数以减少误报
2. 对特定IP或事件类型添加白名单
3. 标记误报以改进AI模型

### 8.9.3 系统性能问题

**问题**: 系统响应缓慢
**解决方案**:
1. 检查服务器资源使用情况
2. 考虑优化数据库（添加索引、清理旧数据）
3. 减少同时执行的复杂查询
4. 联系系统管理员评估是否需要增加资源

**问题**: 数据库查询超时
**解决方案**:
1. 优化查询条件，减少数据范围
2. 避免在高峰期执行复杂报表
3. 联系管理员检查数据库性能

### 8.9.4 获取帮助

如需进一步帮助，可通过以下方式获取支持：

1. 点击系统右上角的"帮助"按钮查看在线文档
2. 在"帮助 > 联系支持"页面提交问题
3. 发送邮件至系统管理员
4. 查看系统日志获取错误详情 