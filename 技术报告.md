### **åŸºäº NLP çš„å®‰å…¨æ—¥å¿—åˆ†æä¸å¼‚å¸¸æ£€æµ‹ - æŠ€æœ¯æŠ¥å‘Š**  

---

## **1. é¡¹ç›®æ¦‚è¿°**  
### **1.1 èƒŒæ™¯**  
æœ¬é¡¹ç›®æ—¨åœ¨åˆ©ç”¨ **è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰** æŠ€æœ¯ï¼Œæ„å»ºä¸€ä¸ª**æ™ºèƒ½å®‰å…¨æ—¥å¿—åˆ†æç³»ç»Ÿ**ï¼Œå¯ä»¥è‡ªåŠ¨è§£ææ—¥å¿—ã€æä¾›è‡ªç„¶è¯­è¨€æŸ¥è¯¢ã€æ£€æµ‹å¼‚å¸¸å¹¶ç”Ÿæˆå‘Šè­¦ï¼Œä»¥å‡å°‘å®‰å…¨åˆ†æäººå‘˜çš„å·¥ä½œé‡ï¼Œæé«˜æ£€æµ‹æ•ˆç‡ã€‚  

### **1.2 ç›®æ ‡**
- **æ—¥å¿—è§£æ**ï¼ˆä»æ–‡æœ¬æå–ç»“æ„åŒ–ä¿¡æ¯ï¼‰  
- **è‡ªç„¶è¯­è¨€æŸ¥è¯¢**ï¼ˆç”¨æˆ·ç”¨æ™®é€šè¯­è¨€æœç´¢æ—¥å¿—ï¼Œæ— éœ€ SQLï¼‰  
- **å¼‚å¸¸æ£€æµ‹**ï¼ˆå‘ç°æš´åŠ›ç ´è§£ã€å¼‚å¸¸ IP ç™»å½•ç­‰å®‰å…¨äº‹ä»¶ï¼‰  
- **Web ç•Œé¢**ï¼ˆæ”¯æŒæ—¥å¿—ä¸Šä¼ ã€æŸ¥è¯¢ã€ç®€å•å¯è§†åŒ–ï¼‰  

---

## **2. æŠ€æœ¯æ¶æ„**
### **2.1 é€‰ç”¨æŠ€æœ¯**
| **ç»„ä»¶** | **æŠ€æœ¯é€‰å‹** |
|----------|-------------|
| **å‰ç«¯** | HTML + Bootstrap + jQueryï¼ˆç®€æ´æ˜“ç”¨ï¼‰ |
| **åç«¯** | Flaskï¼ˆè½»é‡çº§ Web æ¡†æ¶ï¼‰ |
| **æ•°æ®åº“** | SQLiteï¼ˆæ˜“äºéƒ¨ç½²ï¼‰ |
| **æ—¥å¿—è§£æ** | Python + regex + spaCy |
| **è‡ªç„¶è¯­è¨€æŸ¥è¯¢** | GPT-4 / è§„åˆ™åŒ¹é… |
| **å¼‚å¸¸æ£€æµ‹** | è§„åˆ™åŒ¹é… + æœºå™¨å­¦ä¹ ï¼ˆé€»è¾‘å›å½’ï¼‰ |

### **2.2 ç³»ç»Ÿæ¶æ„**
```
+------------------------------+
|        Web å‰ç«¯ï¼ˆBootstrapï¼‰  |
+------------------------------+
        |  ç”¨æˆ·æŸ¥è¯¢ / æ—¥å¿—ä¸Šä¼ 
        v
+------------------------------+
|        Flask API æœåŠ¡å™¨      |
+------------------------------+
        |   API è°ƒç”¨
        v
+------------------------------+
|         SQLite æ•°æ®åº“        |
+------------------------------+
        |  è¯»å– / å­˜å‚¨
        v
+------------------------------+
|   NLP å¤„ç† & å¼‚å¸¸æ£€æµ‹æ¨¡å—   |
+------------------------------+
```

---

## **3. API è®¾è®¡**
### **3.1 API æ€»è§ˆ**
| **æ¨¡å—** | **API** | **åŠŸèƒ½** |
|----------|---------|----------|
| **æ—¥å¿—ç®¡ç†** | `POST /upload_log` | ä¸Šä¼ æ—¥å¿—æ–‡ä»¶ |
| **æ—¥å¿—æŸ¥è¯¢** | `GET /query_log` | é€šè¿‡ SQL æŸ¥è¯¢æ—¥å¿— |
| **è‡ªç„¶è¯­è¨€æŸ¥è¯¢** | `POST /nlp_query` | NLP è§£ææŸ¥è¯¢è¯­å¥ï¼Œè½¬æ¢ä¸º SQL |
| **å¼‚å¸¸æ£€æµ‹** | `GET /detect_anomaly` | æ‰§è¡Œå¼‚å¸¸æ£€æµ‹ï¼Œå¹¶è¿”å›å¯ç–‘æ—¥å¿— |
| **å‘Šè­¦ç³»ç»Ÿ** | `GET /get_alerts` | è·å–æœ€è¿‘çš„å®‰å…¨å‘Šè­¦ |
| **Web å‰ç«¯æ”¯æŒ** | `GET /dashboard_data` | è·å–ç»Ÿè®¡æ•°æ® |

---

### **3.2 API è¯¦ç»†è®¾è®¡**
#### **ğŸ“Œ 3.2.1 æ—¥å¿—ç®¡ç† API**
âœ… **ä¸Šä¼ æ—¥å¿—**
- **URL**ï¼š`POST /upload_log`
- **å‚æ•°**ï¼š
  ```json
  {
    "log_content": "2025-03-24 12:34:56 - User 'admin' login failed from 192.168.1.100"
  }
  ```
- **è¿”å›**
  ```json
  {
    "status": "success",
    "message": "Log uploaded successfully"
  }
  ```

---

#### **ğŸ“Œ 3.2.2 æ—¥å¿—æŸ¥è¯¢ API**
âœ… **æŸ¥è¯¢æ—¥å¿—**
- **URL**ï¼š`GET /query_log`
- **å‚æ•°**
  ```
  ?username=admin&event=login_failed
  ```
- **è¿”å›**
  ```json
  [
    {
      "timestamp": "2025-03-24 12:34:56",
      "username": "admin",
      "event": "login_failed",
      "ip_address": "192.168.1.100"
    }
  ]
  ```

---

#### **ğŸ“Œ 3.2.3 è‡ªç„¶è¯­è¨€æŸ¥è¯¢ API**
âœ… **è§£æè‡ªç„¶è¯­è¨€æŸ¥è¯¢**
- **URL**ï¼š`POST /nlp_query`
- **å‚æ•°**
  ```json
  {
    "query": "è¿‡å» 24 å°æ—¶ admin ç™»å½•å¤±è´¥æ¬¡æ•°"
  }
  ```
- **è¿”å›**
  ```json
  {
    "sql": "SELECT COUNT(*) FROM logs WHERE username='admin' AND event='login_failed' AND timestamp >= datetime('now', '-1 day');",
    "result": "è¿‡å» 24 å°æ—¶å†…ï¼Œadmin ç™»å½•å¤±è´¥ 34 æ¬¡ï¼Œæ¶‰åŠ 5 ä¸ªä¸åŒ IPã€‚"
  }
  ```

---

#### **ğŸ“Œ 3.2.4 å¼‚å¸¸æ£€æµ‹ API**
âœ… **æ‰§è¡Œå¼‚å¸¸æ£€æµ‹**
- **URL**ï¼š`GET /detect_anomaly`
- **è¿”å›**
  ```json
  {
    "anomalies": [
      {
        "timestamp": "2025-03-24 12:34:56",
        "username": "admin",
        "event": "login_failed",
        "ip_address": "192.168.1.100",
        "reason": "Possible brute-force attack (50 failed attempts in 5 minutes)"
      }
    ]
  }
  ```

---

## **4. æ•°æ®åº“è®¾è®¡**
### **4.1 è¡¨ç»“æ„**
#### **æ—¥å¿—è¡¨ï¼ˆlogsï¼‰**
| **å­—æ®µ** | **ç±»å‹** | **æè¿°** |
|----------|---------|----------|
| `id` | INTEGER (PK) | æ—¥å¿— ID |
| `timestamp` | TEXT | äº‹ä»¶æ—¶é—´ |
| `username` | TEXT | ç”¨æˆ·å |
| `event` | TEXT | äº‹ä»¶ç±»å‹ |
| `ip_address` | TEXT | ç™»å½• IP |

#### **å¼‚å¸¸æ£€æµ‹è¡¨ï¼ˆanomaliesï¼‰**
| **å­—æ®µ** | **ç±»å‹** | **æè¿°** |
|----------|---------|----------|
| `id` | INTEGER (PK) | å¼‚å¸¸ ID |
| `timestamp` | TEXT | å‘ç”Ÿæ—¶é—´ |
| `username` | TEXT | å—å½±å“çš„ç”¨æˆ· |
| `event` | TEXT | äº‹ä»¶ç±»å‹ |
| `ip_address` | TEXT | ç™»å½• IP |
| `reason` | TEXT | è§¦å‘å¼‚å¸¸æ£€æµ‹çš„åŸå›  |

---

## **5. 5 äººå›¢é˜Ÿåˆ†å·¥**
| **è§’è‰²** | **ä¸»è¦ä»»åŠ¡** | **æŠ€æœ¯æ ˆ** |
|----------|------------|----------|
| **å‰ç«¯å¼€å‘ï¼ˆAï¼‰** | Web UIï¼ˆæ—¥å¿—æŸ¥è¯¢ç•Œé¢ã€å¯è§†åŒ–ä»ªè¡¨ç›˜ï¼‰ | HTML / Bootstrap / JavaScript |
| **åç«¯å¼€å‘ï¼ˆBï¼‰** | Flask APIï¼ˆæ—¥å¿—å­˜å‚¨ã€æŸ¥è¯¢ï¼‰ | Flask / SQLite |
| **åç«¯å¼€å‘ï¼ˆCï¼‰** | Flask APIï¼ˆå¼‚å¸¸æ£€æµ‹ã€å‘Šè­¦ï¼‰ | Flask / ML è§„åˆ™åŒ¹é… |
| **AI/NLP å·¥ç¨‹å¸ˆï¼ˆDï¼‰** | è®­ç»ƒ NLPï¼ˆè‡ªç„¶è¯­è¨€æŸ¥è¯¢è½¬æ¢ SQLï¼‰ | GPT-4 / spaCy |
| **å…¨æ ˆå¼€å‘ï¼ˆEï¼‰** | ä»£ç é›†æˆã€æµ‹è¯•ã€ä¼˜åŒ– | Python / Flask |

---

## **6. ç»“è®º**
âœ… **åŸºç¡€ç‰ˆ MVP ç›®æ ‡**
- **æ—¥å¿—è§£æ**
- **è‡ªç„¶è¯­è¨€æŸ¥è¯¢**
- **å¼‚å¸¸æ£€æµ‹**
- **Web UI å±•ç¤º**

âœ… **æ˜“æ‹“å±•é«˜çº§åŠŸèƒ½**
- **å‘Šè­¦ç³»ç»Ÿ**
- **æ›´å¤æ‚ NLP å¤„ç†**
- **æ·±åº¦å­¦ä¹ å¼‚å¸¸æ£€æµ‹**

ğŸš€ **å›¢é˜Ÿå¯ä»¥æ ¹æ®æ—¶é—´é€‰æ‹©æ‰©å±•åŠŸèƒ½ï¼Œæˆ‘å¯ä»¥æä¾› Flask ä»£ç æ¨¡æ¿ã€æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ç­‰ï¼** ğŸ’¡