# **基于 NLP 的安全日志分析与异常检测 - 正式项目分工文档**  

---

## **📌 1. 项目分工概览**
### **团队成员及主要职责**
| **成员** | **职责** | **主要模块** |
|----------|----------|------------|
| **A - 前端开发** | 负责 Web UI 设计、日志查询界面 | **日志查询界面、异常检测可视化** |
| **B - 后端开发（API & 数据存储）** | 搭建 Flask API，管理数据库 | **日志管理 API、数据库（SQLite）** |
| **C - 后端开发（异常检测 & 告警）** | 负责异常检测逻辑、告警系统 | **规则匹配 + 机器学习异常检测** |
| **D - AI/NLP 工程师** | 负责 NLP 解析自然语言查询 | **NLP 解析（SQL 生成）** |
| **E - 全栈开发 & 代码集成** | 代码整合、测试、性能优化 | **API 整合、数据流优化、测试** |

---

## **📌 2. 详细分工说明**
### **👤 A - 前端开发**
**📍 主要任务**
1. 设计并实现日志查询界面
2. 处理用户输入（如搜索日志、提交 NLP 查询）
3. 显示异常检测结果，并使用颜色区分高危事件
4. 结合 Bootstrap 美化 UI，提升用户体验

**🔄 推荐工作顺序**
1️⃣ **初步搭建 Web 结构**
   - 设置 Flask 模板 (`templates/`)
   - 编写 `index.html`，建立基本框架（导航栏、搜索框、表格）
  
2️⃣ **开发日志查询界面**
   - **日志查询**：用户输入查询语句（SQL / 自然语言），调用 `/query_log` 和 `/nlp_query`
   - **数据表格**：使用 Bootstrap 渲染查询结果  

3️⃣ **显示异常检测结果**
   - 调用 `/detect_anomaly` API，显示异常日志
   - 颜色区分：
     - 绿色 ✅（正常）
     - 黄色 ⚠️（可疑）
     - 红色 🔥（高危）

4️⃣ **美化 UI**
   - 优化日志显示，增加分页
   - 兼容移动端  

---

### **👤 B - 后端开发（API & 数据存储）**
**📍 主要任务**
1. 设计 Flask API 结构
2. 搭建 SQLite 数据库，存储日志
3. 实现日志管理 API（上传 & 查询日志）

**🔄 推荐工作顺序**
1️⃣ **创建数据库（SQLite）**
   - 设计 `logs` 表（存储日志数据）
   - 设计 `anomalies` 表（存储异常检测结果）

2️⃣ **编写日志管理 API**
   - `/upload_log`（上传日志）
   - `/query_log`（SQL 查询日志）

3️⃣ **优化数据库查询**
   - **索引优化**（提升查询速度）
   - **日志存储优化**（避免重复数据）

---

### **👤 C - 后端开发（异常检测 & 告警）**
**📍 主要任务**
1. 设计异常检测逻辑（暴力破解检测、异常 IP 识别）
2. 实现告警系统（触发高危事件通知）
3. 结合数据库优化异常日志存储

**🔄 推荐工作顺序**
1️⃣ **编写异常检测逻辑**
   - **规则匹配**：
     - **短时间内多次失败登录 → 暴力破解**
     - **不同国家 IP 登录 → 可疑**
   - **机器学习优化**（可选）
   
2️⃣ **实现异常检测 API**
   - `/detect_anomaly`（检测日志中的异常行为）
   - `/get_alerts`（获取当前告警）

3️⃣ **存储异常检测结果**
   - 设计 `anomalies` 表
   - 将检测到的异常存入数据库

---

### **👤 D - AI/NLP 工程师**
**📍 主要任务**
1. 解析自然语言查询，转换成 SQL
2. 处理用户查询，支持模糊搜索
3. 优化 NLP 查询转换的准确性

**🔄 推荐工作顺序**
1️⃣ **使用 GPT-4 处理 NLP 任务**
   - 训练 NLP 解析器，将自然语言转换为 SQL
   - 处理查询优化（如模糊匹配）

2️⃣ **实现 NLP API**
   - `/nlp_query`（解析自然语言查询）

3️⃣ **测试与优化**
   - 通过日志数据测试 NLP 转换的准确率
   - 增强查询理解能力（如 “最近 7 天” 自动转换为 `datetime` 计算）

---

### **👤 E - 全栈开发 & 代码集成**
**📍 主要任务**
1. 负责各模块代码集成（API、数据库、NLP、前端）
2. 进行系统测试，修复 bug
3. 优化代码结构，提高性能

**🔄 推荐工作顺序**
1️⃣ **整合前端 & 后端**
   - 确保 Flask API 能被前端调用
   - 处理前端返回数据格式

2️⃣ **测试 API**
   - 用 `Postman` / `pytest` 测试所有 API
   - 记录 bug 并优化

3️⃣ **优化系统**
   - **优化数据库查询**
   - **优化日志解析速度**
   - **改进 API 响应时间**

---

## **📌 3. 时间计划表**
| **日期** | **任务** | **负责人** |
|----------|----------|-----------|
| **Day 1（周一）** | 项目初始化（数据库 & Flask 结构） | B, E |
| **Day 2（周二）** | **日志解析模块**（支持 TXT / CSV） | B, E |
| **Day 3（周三）** | **NLP 处理（自然语言查询 → SQL）** | D |
| **Day 4（周四）** | **异常检测（暴力破解 / 异常 IP 识别）** | C |
| **Day 5（周五）** | **前端 Web UI（日志查询 + 搜索框）** | A |
| **Day 6-7（周六-周日）** | **API 对接 + MVP 初步测试** | 全体成员 |
| **Day 8（周一）** | **优化异常检测规则** | C |
| **Day 9（周二）** | **优化 NLP 查询转换** | D |
| **Day 10（周三）** | **系统测试 & 调试** | E |
| **Day 11-14（周四-周日）** | **编写文档、PPT，准备演示** | 全体成员 |

---

## **📌 4. 结论**
✅ **每位成员都有清晰的任务 & 工作流程，能够快速上手！**  
✅ **项目开发流程合理，基础版 MVP 可在 2 周内完成！**  
✅ **后续可以扩展高级功能（如 AI 事件预测、威胁情报集成）！**  

🚀 **如果团队确认方向，我可以提供 Flask 代码模板、数据库初始化脚本等！** 💡